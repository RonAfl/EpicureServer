{
    "apps": [
        {
            "name": "repicure",
            "script": "index.ts",
            "env": {
                "NODE_ENV": "development",
                "PORT": 3000
            },
            "instances": 2,
            "exec_mode": "cluster",
            "log_date_format": "YYYY-MM-DD HH:mm:ss",
            "error_file": "/var/log/repicure/error.log",
            "out_file": "/var/log/repicure/out.log",
            "merge_logs": true
        }
    ],

    "deploy" : {
		"production": {
			"key": "~/.ssh/Repicure-key.pem",
			"user": "ubuntu",


			"host": ["ec2-43-207-40-73.ap-northeast-1.compute.amazonaws.com"],

			"ref": "origin/dev",

			"repo": "git@github.com:RonAfl/EpicureServer.git",

			"path": "/home/ubuntu/repicureServer",

            "ssh_options": "StrictHostKeyChecking=no",

			"post-deploy": "mkdir -p logs && npm i && pm2 reload ecosystem.json --env production",

			"pre-deploy-local": "echo 'Deploying code to servers'",
			"env": {
				"NODE_ENV": "production"
			}


        }
    }
}