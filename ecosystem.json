{
    "apps": [
        {
            "name": "Epicure",
            "script": "./dist/index.js",
            "env": {
                "NODE_ENV": "development",
                "PORT": 3000
            },
            "instances": 2,
            "exec_mode": "cluster",
            "log_date_format": "YYYY-MM-DD HH:mm:ss",
            "error_file": "/var/log/Epicure/error.log",
            "out_file": "/var/log/Epicure/out.log",
            "merge_logs": true
        }
    ],

    "deploy" : {
		"production": {
			"key": "~/.ssh/EpicureRon-Key.pem",
			"user": "ubuntu",

			"host": ["ec2-54-199-178-180.ap-northeast-1.compute.amazonaws.com"],

			"ref": "origin/dev",

			"repo": "git@github.com:RonAfl/EpicureServer.git",

			"path": "/home/ubuntu/Epicure-Server",

            "ssh_options": "StrictHostKeyChecking=no",

			"post-deploy": "mkdir -p logs && npm i && tsc && pm2 reload ecosystem.json --env production",

			"pre-deploy-local": "echo 'Deploying code to servers'",
			"env": {
				"NODE_ENV": "production"
			}


        }
    }
}